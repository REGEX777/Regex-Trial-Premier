<%- include('partials/nav.ejs') -%>
<div class="flex flex-grow items-start justify-center">

    <div class="wrapper w-[90%]">
        <div class="flex items-center justify-between">
            <p class=" text-2xl font-poppins font-semibold">Feed</p>
            <div class="flex items-center justify-center gap-10">
                <button id="dropdownDelayButton" data-dropdown-toggle="dropdownDelay" data-dropdown-delay="500"
                    data-dropdown-trigger="hover"
                    class="text-white bg-black hover:bg-[#303030] font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center"
                    type="button">Sort By <svg class="w-2.5 h-2.5 ml-2.5" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="m1 1 4 4 4-4" />
                    </svg></button>
            </div>

            <div id="dropdownDelay" class="z-10 hidden bg-black divide-y divide-gray-100 rounded-lg shadow w-44">
                <ul class="py-2 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdownDelayButton">
                    <li>
                        <a href="/" class="block px-4 py-2 hover:bg-[#303030]">New to Old</a>
                        <a href="/?sortby=old" class="block px-4 py-2 hover:bg-[#303030]">Oldest First</a>
                        <% if(user ){%>

                        <a href="/posts/user/<%= user._id %>" class="block px-4 py-2 hover:bg-[#303030]">My Posts</a>

                        <% } %>
                    </li>

                </ul>
            </div>

        </div>


        <br>
        <div
            class="grid grid-cols-1 mid-small3:grid-cols-2 mob-ninenine3:grid-cols-3 4k-lowminus2:grid-cols-4 gap-10 items-start justify-center">
            <% posts.forEach(function(post){ %>
            <div class="min-h-[20rem] w-full rounded-lg flex items-center justify-center flex-col gap-5">
                <a class="w-full" href="/posts/<%= post._id %>"><img class="h-[15rem] w-full rounded-lg"
                        src="/uploads/<%= post.filename %>" alt=""></a>
                <div class="flex flex-col items-start justify-center font-poppins gap-2 w-full">
                    <a href="/posts/<%= post._id %>" class="font-medium text-lg"><%= post.title %></a>
                    <p class="font-light text-sm text-[#2b2b2b]">
                        <% if (post.body.length > 250) { %>
                        <%= post.body.substring(0, 250) %>... <a class="text-blue-600"
                            href="/posts/<%= post._id %>">Read
                            more</a>
                        <% } else { %>
                        <%= post.body %>
                        <% } %>
                    </p>
                    <a href="/posts/<%= post._id %>" class="font-medium text-lg">By <%= post.username %></a>

                </div>

            </div>
            <% }) %>

        </div>
    </div>

    <%- include('partials/foot') -%>